---
title: "FishBae"
subtitle: "EEMB 595 Final Project" 
author: "Phoebe Racine & Erin Winslow"
date: "5/13/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

#Questions for Grace
1. Do we need to code in JAGS?
- we're considering just R and are considering STAN

2.The length of the presentation might be long considering where we're at vs. where the class is at. What might be more appropriate?

#Task List for Phoebe & Erin
- ~~copy/paste from Juanca~~
  - figure out what data sources we need in order to create Bayesian regression
   - I think we're at "fao_salmon_lobster.csv" & "all_salmon_lobster.csv"
  - beautify graph 
- copy/paste GLM code from R
- read 3.3 of stats book
- research alpha/beta for GLMs
- **combine Bay line w/ Juanca graph**
- consider including RAM legacy data if we want to provide a fuller story
  - consider analysis type
- Presentation
  - pull graphs from early AquaForce
  



#Loading Packages
```{r}
library(tidyverse)


```


#Salmon and Lobster Code from Juanca


##Salmon-Lobster Graph
```{r}

fao_salmon_lobster  %>%
  group_by(year, source, general_name) %>% 
  summarize(quantity = sum(quantity)) %>% 
  filter(!(general_name == "Lobster" & source == "Aquaculture")) %>% 
  rename(Species = general_name) %>% 
  ggplot(aes(x = year, y = quantity/1000000, color = source, linetype = Species, group = paste(source, Species))) +
  geom_line(size = 1) +
  scale_color_brewer(palette = "Set1") +
  geom_vline(xintercept = 1962, linetype = "dashed") +
  geom_text(aes(x = 1975, y = 2.5, label = "Salmon aquaculture begins"), color = "black", size = 4) +
  labs(x = "Year", y = "Quantities (million MT)", caption = "(Data from FAO: www.fao.org/fishery/statistics/)") +
  theme_minimal()

```



#Code for GLM in R
```{r}



```



##Load RAM Legacy database
```{r}
ram <- read.csv(here("raw_data","RAM", "RAM.csv"), stringsAsFactors = F) %>% 
  janitor::clean_names()

```

```{r}
lobster_salmon_ram <- ram %>% 
  mutate(lobster = grepl(pattern = "lobster", x = stocklong),
         salmon = grepl(pattern = "salmon", x = stocklong),
         general_name = case_when(lobster ~ "Lobster",
                                  TRUE ~ "Salmon")) %>% 
  filter(lobster | salmon,
         tsid == "BdivBmsytouse-dimensionless")

```

###Graph of RAM Salmon and Lobster data
```{r}

lobster_salmon_ram %>% 
  group_by(tsyear, general_name) %>% 
  summarize(tsvalue = median(tsvalue, na.rm = T)) %>% 
  ggplot(aes(x = tsyear, y = tsvalue, color = general_name, group = general_name)) +
  geom_line(size = 1) +
  theme_bw()

```



